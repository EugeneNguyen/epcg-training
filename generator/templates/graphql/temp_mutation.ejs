let db = require('../../database/models');

let mutation = {
  async <%= modelNameSnake %>_add(parent, { data }, context, info) {
    return db.<%= modelName %>.create({
<% for (const field of fieldsArray) { -%>
<%   if (field.addForm) { -%>
      <%= field.name %>: data.<%= field.name %>,
<%   } -%>
<% } -%>
    });
  },
  async <%= modelNameSnake  %>_edit(parent, { id, data }, context, info) {
    const <%= modelName %> = await db.<%= modelName %>.findByPk(id);
<% for (const field of fieldsArray) { -%>
<%   if (field.editForm) { -%>
    <%= modelName %>.<%= field.name %> = data.<%= field.name %>;
<%   } -%>
<% } -%>
    await <%= modelName %>.save();
    await <%= modelName %>.reload();

    return <%= modelName %>;
  },
  async <%= modelNameSnake %>_delete(parent, { id }, context, info) {
    const <%= modelName %> = await db.<%= modelName %>.findByPk(id);
    await <%= modelName %>.destroy();
    return true;
  },

};

module.exports = mutation;
